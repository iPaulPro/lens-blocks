{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "post",
  "type": "registry:block",
  "title": "Lens Post",
  "description": "Displays a post from Lens Social Protocol, including the content, author, attachments, and engagement actions.",
  "dependencies": [
    "@lens-protocol/client@0.0.0-canary-20250820102520",
    "@lens-protocol/react@0.0.0-canary-20250820102520",
    "@lens-protocol/types@0.0.0-canary-20250820102520",
    "@lens-protocol/metadata@2.1.0",
    "@lens-chain/storage-client@1.0.6",
    "@lens-chain/sdk@1.0.3",
    "lucide-react",
    "moment@2.30.1",
    "viem@2.33.0",
    "wagmi@2.15.3"
  ],
  "registryDependencies": [
    "avatar",
    "button",
    "skeleton",
    "dialog",
    "tooltip",
    "dropdown-menu",
    "@lens-blocks/utils",
    "@lens-blocks/use-post-context",
    "@lens-blocks/use-reaction-toggle",
    "@lens-blocks/lens-markdown",
    "@lens-blocks/audio-player",
    "@lens-blocks/video-player"
  ],
  "files": [
    {
      "path": "registry/new-york/blocks/lens-post.tsx",
      "content": "\"use client\";\n\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/registry/new-york/ui/dropdown-menu\";\nimport { MouseEvent, useEffect, useRef, useState } from \"react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/registry/new-york/ui/avatar\";\nimport { Account, evmAddress, Post, TxHash, URI } from \"@lens-protocol/react\";\nimport { Copy, Flag, MoreHorizontal, UserCircle2 } from \"lucide-react\";\nimport LensMarkdown from \"../components/common/lens-markdown\";\nimport LikeButton from \"@/registry/new-york/components/feed/likes/like-button\";\nimport ReferenceButton from \"@/registry/new-york/components/feed/references/reference-button\";\nimport CommentButton from \"@/registry/new-york/components/feed/comment/comment-button\";\nimport moment from \"moment/moment\";\nimport CollectButton from \"@/registry/new-york/components/feed/collects/collect-button\";\nimport TipButton from \"@/registry/new-york/components/feed/tips/tip-button\";\nimport { cn } from \"@/lib/utils\";\nimport { getUsernamePath, parseUri, truncateAddress } from \"@/registry/new-york/lib/lens-utils\";\nimport { Button } from \"@/registry/new-york/ui/button\";\nimport BookmarkButton from \"@/registry/new-york/components/feed/bookmarks/bookmark-button\";\nimport CollectDialog, { CollectDialogRef } from \"@/registry/new-york/components/feed/collects/collect-dialog\";\nimport QuoteDialog, { QuoteDialogRef } from \"@/registry/new-york/components/feed/references/quote-dialog\";\nimport LensTipDialog, { TipDialogRef } from \"@/registry/new-york/components/feed/tips/lens-tip-dialog\";\nimport { useLensPostContext } from \"@/registry/new-york/hooks/use-lens-post-context\";\nimport { Dialog, DialogContent } from \"@/registry/new-york/ui/dialog\";\nimport LensAudioPlayer from \"@/registry/new-york/components/common/lens-audio-player\";\nimport LensVideoPlayer from \"@/registry/new-york/components/common/lens-video-player\";\nimport LensImage from \"@/registry/new-york/components/feed/lens-image\";\nimport LinkPreview from \"@/registry/new-york/components/feed/link-preview\";\nimport { RegEx } from \"@/registry/new-york/lib/regex\";\n\ntype LensPostProps = {\n  /**\n   * Callback function that is called when the user clicks on a post.\n   */\n  onPostClick?: (post: Post) => void;\n\n  /**\n   * Callback function that is called when the user clicks on an account.\n   */\n  onAccountClick?: (account: Account) => void;\n\n  /**\n   * Callback function that is called when the post URL is copied to clipboard.\n   */\n  onPostUrlCopied?: () => void;\n\n  /**\n   * The URL pattern to use for generating post links if onPostClick is not provided.\n   * It should include `{slug}` as a placeholder for the post slug.\n   * If not provided, a default pattern (/posts/{slug}) will be used.\n   * * Example: `/posts/{slug}` or `https://example.com/posts/{slug}`\n   */\n  postUrlPattern?: string;\n\n  /**\n   * Callback function that is called when a repost is successful.\n   * It receives the transaction hash as an argument.\n   */\n  onRepostSuccess?: (txHash: TxHash) => void;\n\n  /**\n   * Callback function that is called when a tip is successfully created.\n   * It receives the transaction hash as an argument.\n   */\n  onTipCreated?: (txHash: TxHash) => void;\n\n  /**\n   * Callback function that is called when there is an error creating a tip.\n   * It receives the error object as an argument.\n   */\n  onTipError?: (error: Error) => void;\n\n  /**\n   * Optional additional class names to apply to the post container.\n   *\n   */\n  className?: string;\n};\n\nexport const LensPost = (props: LensPostProps) => {\n  const {\n    onPostClick,\n    onAccountClick,\n    postUrlPattern = \"/posts/{slug}\",\n    onRepostSuccess,\n    onPostUrlCopied,\n    onTipCreated,\n    onTipError,\n    className,\n  } = props;\n\n  const collectDialog = useRef<CollectDialogRef>(null);\n  const quoteDialog = useRef<QuoteDialogRef>(null);\n  const tipDialog = useRef<TipDialogRef>(null);\n\n  const [lightboxUri, setLightboxUri] = useState<string | null>(null);\n  const [lightboxOpen, setLightboxOpen] = useState(false);\n  const [urlInContent, setUrlInContent] = useState<string | null>(null);\n\n  const { post, loading, tip } = useLensPostContext();\n\n  useEffect(() => {\n    if (!lightboxOpen) {\n      setLightboxUri(null);\n    }\n  }, [lightboxOpen]);\n\n  useEffect(() => {\n    if (!post) return;\n\n    const isPost = post.__typename === \"Post\";\n    const basePost = isPost ? post : post.repostOf;\n    let postMetadata = basePost.metadata;\n    if (postMetadata.__typename === \"UnknownPostMetadata\") {\n      return;\n    }\n\n    const checkContentForUrls = async () => {\n      const urlRegex = new RegExp(RegEx.URL);\n\n      const urls = postMetadata.content.match(urlRegex);\n      if (!urls?.length) return;\n\n      setUrlInContent(urls[0]);\n    };\n\n    checkContentForUrls();\n  }, [post]);\n\n  if (!post) {\n    if (loading) {\n      return <></>; // TODO return skeleton\n    }\n    return null;\n  }\n\n  const isPost = post.__typename === \"Post\";\n  const basePost = isPost ? post : post.repostOf;\n  const postMetadata = basePost.metadata;\n  if (postMetadata.__typename === \"UnknownPostMetadata\") {\n    return <>Unsupported post type</>;\n  }\n\n  const author = basePost.author;\n  const authorName = author.metadata?.name ?? author.username?.localName ?? \"[anonymous]\";\n  const image = postMetadata.__typename === \"ImageMetadata\" ? postMetadata.image : null;\n  const audio = postMetadata.__typename === \"AudioMetadata\" ? postMetadata.audio : null;\n  const video = postMetadata.__typename === \"VideoMetadata\" ? postMetadata.video : null;\n  const link: URI | null = postMetadata.__typename === \"LinkMetadata\" ? postMetadata.sharingLink : null;\n\n  // function isVideoPlatformUrl(url: string): boolean {\n  //   const patterns = [\n  //     /^(https?:\\/\\/)?(www\\.)?(youtube\\.com|youtu\\.be)\\/.+$/, // YouTube\n  //     /^(https?:\\/\\/)?(www\\.)?vimeo\\.com\\/.+$/, // Vimeo\n  //     /^(https?:\\/\\/)?(www\\.)?twitch\\.tv\\/.+$/, // Twitch\n  //     /^(https?:\\/\\/)?(www\\.)?tiktok\\.com\\/.+$/, // TikTok\n  //   ];\n  //\n  //   return patterns.some(pattern => pattern.test(url));\n  // }\n  //\n  // const isVideoEmbed = videoUri ? isVideoPlatformUrl(videoUri) : false;\n\n  const collectAction =\n    post && \"actions\" in post && post.actions?.find(action => action.__typename === \"SimpleCollectAction\");\n\n  const onReportClick = () => {};\n\n  const onCopyClick = () => {\n    const postUrl = postUrlPattern\n      ? postUrlPattern.replace(\"{slug}\", basePost.slug)\n      : `${window.location.origin}/posts/${basePost.slug}`;\n    navigator.clipboard\n      .writeText(postUrl)\n      .then(onPostUrlCopied)\n      .catch(err => {\n        console.error(\"Failed to copy post link:\", err);\n      });\n  };\n\n  const handleAccountClick = (event: MouseEvent<HTMLButtonElement>) => {\n    event.stopPropagation();\n    if (onAccountClick) {\n      onAccountClick(author);\n    } else if (author.username) {\n      const path = getUsernamePath(author.username.value, author.username.namespace);\n      if (event.metaKey || event.ctrlKey || event.button === 1) {\n        window.open(path, \"_blank\");\n      } else {\n        window.open(path, \"_self\");\n      }\n    }\n  };\n\n  const handlePostClick = (event: MouseEvent<HTMLButtonElement>) => {\n    // Allow text selection\n    if (window.getSelection()?.toString()) {\n      return;\n    }\n\n    event.preventDefault();\n\n    // If it's a repost, we assume the user wants to see the original post\n    const postUrl = postUrlPattern ? postUrlPattern.replace(\"{slug}\", basePost.slug) : `/posts/${basePost.slug}`;\n\n    if (onPostClick) {\n      onPostClick(basePost);\n    } else if (event.metaKey || event.ctrlKey || event.button === 1) {\n      window.open(postUrl, \"_blank\");\n    } else {\n      window.open(postUrl, \"_self\");\n    }\n  };\n\n  return (\n    <>\n      <article\n        onClick={handlePostClick}\n        className={cn(\"w-full px-3 md:px-4 pt-3 md:pt-4 pb-2 flex flex-col gap-3 text-start cursor-pointer\", className)}\n      >\n        <div className=\"flex-grow flex justify-between flex-none\">\n          <div className=\"flex gap-2 w-full min-w-0\">\n            <button type=\"button\" onClick={handleAccountClick} className=\"cursor-pointer\">\n              <Avatar className=\"flex-none w-10 h-10\">\n                <AvatarImage src={parseUri(author.metadata?.picture)} alt={`${authorName}'s avatar`} />\n                <AvatarFallback>\n                  <UserCircle2 className=\"w-10 h-10 opacity-45\" />\n                </AvatarFallback>\n              </Avatar>\n            </button>\n            <div className=\"flex-grow flex flex-col min-w-0\">\n              <button type=\"button\" onClick={handleAccountClick} className=\"flex gap-1 w-full min-w-0\">\n                <span className=\"text-sm md:text-base font-semibold truncate cursor-pointer hover:underline\">\n                  {authorName}\n                </span>\n                {author.username?.localName ? (\n                  <span className=\"text-sm md:text-base text-muted-foreground truncate cursor-pointer hover:underline\">\n                    @{author.username.localName}\n                  </span>\n                ) : (\n                  <span className=\"text-sm md:text-base text-muted-foreground truncate cursor-pointer hover:underline\">\n                    {truncateAddress(author.address)}\n                  </span>\n                )}\n              </button>\n              <a\n                href={postUrlPattern.replace(\"{slug}\", basePost.slug)}\n                onClick={e => e.stopPropagation()}\n                className=\"contents\"\n              >\n                <abbr\n                  title={new Date(post.timestamp).toLocaleString()}\n                  className=\"text-xs opacity-65 no-underline hover:underline m-0 p-0\"\n                >\n                  {moment(post.timestamp).fromNow(true)}\n                </abbr>\n              </a>\n            </div>\n          </div>\n          <div className=\"flex gap-2\">\n            <BookmarkButton className=\"md:hidden\" />\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  className=\"w-8 h-8 active:outline-none focus-visible:outline-none hover:opacity-75 cursor-pointer rounded-full -me-2.5 md:me-0\"\n                >\n                  <MoreHorizontal className=\"w-4 h-4 opacity-75\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent className=\"min-w-48\" side=\"bottom\">\n                <DropdownMenuItem className=\"focus:outline-none p-0\">\n                  <button className=\"flex gap-2 items-center w-full p-2\" onClick={onReportClick} disabled={loading}>\n                    <Flag />\n                    Report post\n                  </button>\n                </DropdownMenuItem>\n                <DropdownMenuItem className=\"focus:outline-none p-0\">\n                  <button className=\"flex gap-2 items-center w-full p-2\" onClick={onCopyClick} disabled={loading}>\n                    <Copy className=\"w-4 h-4 inline\" />\n                    Copy link\n                  </button>\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        </div>\n        {postMetadata.content && (\n          <div className=\"min-h-12 flex items-center\">\n            <LensMarkdown\n              content={postMetadata.content}\n              mentions={basePost.mentions}\n              className=\"text-sm md:text-base\"\n            />\n          </div>\n        )}\n        {image && (\n          <LensImage\n            image={image}\n            alt={image?.altTag ?? \"\"}\n            className=\"w-full mt-2 border rounded-xl object-contain cursor-pointer\"\n            width={600}\n            height={400}\n            loading=\"lazy\"\n            onClick={event => {\n              event.stopPropagation();\n              setLightboxUri(image.item);\n              setLightboxOpen(true);\n            }}\n          />\n        )}\n        {audio && (\n          <LensAudioPlayer\n            audio={audio}\n            postTitle={\"title\" in postMetadata ? postMetadata.title : undefined}\n            onCoverClick={imageUri => {\n              setLightboxUri(imageUri);\n              setLightboxOpen(true);\n            }}\n          />\n        )}\n        {video && <LensVideoPlayer video={video} preload=\"metadata\" />}\n        {link && <LinkPreview url={link} />}\n        {urlInContent && !image && !audio && !video && !link && <LinkPreview url={urlInContent} />}\n        <div className=\"w-full flex gap-4 md:gap-8 items-center justify-between\">\n          <div className=\"w-full flex items-center justify-between md:justify-normal gap-4 md:gap-6 -mx-2\">\n            <CommentButton onClick={() => undefined} />\n            <LikeButton />\n            <ReferenceButton onQuoteClick={() => quoteDialog.current?.open()} onRepostSuccess={onRepostSuccess} />\n            {collectAction && <CollectButton onClick={() => collectDialog.current?.open()} />}\n            <TipButton onClick={() => tipDialog.current?.open()} />\n          </div>\n          <BookmarkButton className=\"hidden md:flex\" />\n        </div>\n      </article>\n      {collectAction && <CollectDialog ref={collectDialog} post={post} />}\n      <QuoteDialog ref={quoteDialog} post={post} createQuote={async (post, content) => undefined} />\n      <LensTipDialog\n        ref={tipDialog}\n        supportedTokens={[evmAddress(\"0x8827054498a0B36259A51e675Feb13C1fCa9f591\")]}\n        createTip={tip}\n        onTipCreated={onTipCreated}\n        onError={onTipError}\n      />\n      <Dialog open={lightboxOpen} onOpenChange={setLightboxOpen}>\n        <DialogContent className=\"flex justify-center items-center max-h-full max-w-full bg-transparent border-none shadow-none\">\n          {lightboxOpen && lightboxUri && (\n            <img\n              src={lightboxUri}\n              alt={\"Image attached to post\"}\n              className=\"max-w-full max-h-full object-contain shadow-lg\"\n              loading=\"lazy\"\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/likes/like-button.tsx",
      "content": "\"use client\";\n\nimport { MouseEvent } from \"react\";\nimport { Heart } from \"lucide-react\";\nimport { Button } from \"@/registry/new-york/ui/button\";\nimport { useLensPostContext } from \"@/registry/new-york/hooks/use-lens-post-context\";\nimport { cn } from \"@/lib/utils\";\n\ntype LikeButtonProps = {\n  className?: string;\n  onSuccess?: () => void;\n  onError?: (error: Error) => void;\n};\n\nconst LikeButton = ({ className, onSuccess, onError }: LikeButtonProps) => {\n  const { post, loading: postLoading, toggleLike, optimistic } = useLensPostContext();\n\n  const operations = post && \"operations\" in post ? post.operations : null;\n\n  const onClick = async (event: MouseEvent<HTMLButtonElement>) => {\n    event.currentTarget.blur();\n    event.stopPropagation();\n\n    if (post?.__typename !== \"Post\") return;\n\n    try {\n      await toggleLike();\n      onSuccess?.();\n    } catch (e) {\n      if (onError) {\n        onError(e instanceof Error ? e : new Error(\"An unexpected error occurred while toggling like.\"));\n      } else {\n        console.error(\"An unexpected error occurred while toggling like:\", e);\n      }\n    }\n  };\n\n  return (\n    <div className=\"flex items-center\">\n      <Button\n        onClick={onClick}\n        disabled={postLoading}\n        variant=\"ghost\"\n        size=\"icon\"\n        className={cn(\"w-8 h-8 active:outline-none focus-visible:outline-none cursor-pointer rounded-full\", className)}\n      >\n        {optimistic.liked || operations?.hasUpvoted ? (\n          <Heart className=\"text-primary\" fill=\"var(--primary)\" />\n        ) : (\n          <Heart className=\"opacity-85\" />\n        )}\n      </Button>\n      <span>{new Intl.NumberFormat().format(optimistic.likeCount)}</span>\n    </div>\n  );\n};\n\nexport default LikeButton;\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/references/reference-button.tsx",
      "content": "import {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/registry/new-york/ui/dropdown-menu\";\nimport { AnyPost, Post, TxHash } from \"@lens-protocol/react\";\nimport { MouseEvent, useState } from \"react\";\nimport { CheckCircle, Loader, MessageCircle, Repeat2 } from \"lucide-react\";\nimport { Button } from \"@/registry/new-york/ui/button\";\nimport { useLensPostContext } from \"@/registry/new-york/hooks/use-lens-post-context\";\n\ntype ReferenceButtonProps = {\n  onQuoteClick: (post: AnyPost) => void;\n  onRepostSuccess?: (txHash: TxHash) => void;\n  onError?: (error: Error) => void;\n};\n\nconst ReferenceButton = ({ onQuoteClick, onRepostSuccess, onError }: ReferenceButtonProps) => {\n  const { post, repost, loading: postLoading, optimistic } = useLensPostContext();\n\n  const [isDropdownMenuOpen, setIsDropdownMenuOpen] = useState(false);\n  const [isPosting, setIsPosting] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n\n  const postToReference: Post | null | undefined = post?.__typename === \"Repost\" ? post.repostOf : post;\n\n  const onClick = (event: MouseEvent<HTMLButtonElement>) => {\n    event.currentTarget.blur();\n    event.stopPropagation();\n    setIsDropdownMenuOpen(true);\n  };\n\n  const onRepostClick = async (event: MouseEvent<HTMLButtonElement>) => {\n    event.stopPropagation();\n    setIsPosting(true);\n    try {\n      const txHash = await repost();\n      if (txHash) {\n        onRepostSuccess?.(txHash);\n        setShowSuccess(true);\n        setTimeout(() => {\n          setShowSuccess(false);\n        }, 3000);\n        setShowSuccess(false);\n      }\n    } catch (error) {\n      if (error instanceof Error) {\n        onError?.(error);\n      }\n    } finally {\n      setIsPosting(false);\n    }\n  };\n\n  const handleQuoteClick = (event: MouseEvent<HTMLButtonElement>) => {\n    event.currentTarget.blur();\n    event.stopPropagation();\n    setIsDropdownMenuOpen(false);\n    if (!post) return;\n    onQuoteClick(post);\n  };\n\n  if (!post) return null;\n\n  return (\n    <div className=\"flex items-center\">\n      <DropdownMenu open={isDropdownMenuOpen} onOpenChange={setIsDropdownMenuOpen}>\n        <DropdownMenuTrigger asChild>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            disabled={postLoading || isPosting || showSuccess}\n            onClick={onClick}\n            className=\"w-8 h-8 active:outline-none focus-visible:outline-none hover:opacity-75 cursor-pointer rounded-full\"\n          >\n            {isPosting ? (\n              <Loader className=\"animate-spin w-4 h-4 text-muted-foreground\" />\n            ) : showSuccess ? (\n              <CheckCircle className=\"size-2\" />\n            ) : postToReference?.operations?.hasReposted ||\n              postToReference?.operations?.hasQuoted.optimistic ||\n              postToReference?.operations?.hasQuoted.onChain ? (\n              <Repeat2 className=\"size-[1.125rem]\" strokeWidth={3} stroke=\"var(--primary)\" />\n            ) : (\n              <Repeat2 className=\"size-[1.125rem]\" />\n            )}\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent className=\"min-w-48\">\n          <DropdownMenuItem className=\"text-md focus:outline-none p-0\">\n            <button\n              className=\"flex gap-4 items-center w-full p-3\"\n              onClick={onRepostClick}\n              disabled={postLoading || isPosting}\n            >\n              <Repeat2 className=\"w-4 h-4 inline\" />\n              Repost\n            </button>\n          </DropdownMenuItem>\n          <DropdownMenuItem className=\"text-md focus:outline-none p-0\">\n            <button\n              className=\"flex gap-4 items-center w-full p-3\"\n              onClick={handleQuoteClick}\n              disabled={postLoading || isPosting}\n            >\n              <MessageCircle className=\"w-4 h-4 inline\" />\n              Quote\n            </button>\n          </DropdownMenuItem>\n        </DropdownMenuContent>\n      </DropdownMenu>\n      <span className=\"opacity-85\">{new Intl.NumberFormat().format(optimistic.repostAndQuoteCount)}</span>\n    </div>\n  );\n};\n\nexport default ReferenceButton;\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/references/quote-dialog.tsx",
      "content": "import { AnyPost, TxHash } from \"@lens-protocol/react\";\nimport { forwardRef, useImperativeHandle, useState } from \"react\";\n\nexport interface QuoteDialogRef {\n  open: () => void;\n  close: () => void;\n  isOpen: boolean;\n}\n\nexport interface QuoteDialogProps {\n  post: AnyPost;\n  createQuote: (post: AnyPost, content: string) => Promise<TxHash | undefined>;\n  onError?: (error: Error) => void;\n}\n\nconst QuoteDialog = forwardRef<QuoteDialogRef, QuoteDialogProps>(({ post, createQuote, onError }, ref) => {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useImperativeHandle(ref, () => ({\n    open: () => setDialogOpen(true),\n    close: () => setDialogOpen(false),\n    isOpen: dialogOpen,\n  }));\n\n  return <></>;\n});\n\nexport default QuoteDialog;\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/bookmarks/bookmark-button.tsx",
      "content": "import { Button } from \"@/registry/new-york/ui/button\";\nimport { Bookmark } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useLensPostContext } from \"@/registry/new-york/hooks/use-lens-post-context\";\nimport { MouseEvent } from \"react\";\n\ntype BookmarkButtonProps = {\n  className?: string;\n  onSuccess?: () => void;\n  onError?: (error: Error) => void;\n};\n\nconst BookmarkButton = ({ className, onSuccess, onError }: BookmarkButtonProps) => {\n  const { post, loading: postLoading, toggleBookmark, optimistic } = useLensPostContext();\n\n  const operations = post && \"operations\" in post ? post.operations : null;\n\n  const onClick = async (event: MouseEvent<HTMLButtonElement>) => {\n    event.currentTarget.blur();\n    event.stopPropagation();\n\n    if (!post) return;\n\n    try {\n      await toggleBookmark();\n      onSuccess?.();\n    } catch (error) {\n      if (error instanceof Error && onError) {\n        onError(error);\n      }\n    }\n  };\n\n  return (\n    <Button\n      onClick={onClick}\n      disabled={postLoading}\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"w-8 h-8 active:outline-none focus-visible:outline-none cursor-pointer rounded-full\", className)}\n    >\n      {optimistic.bookmarked || operations?.hasBookmarked ? (\n        <Bookmark className=\"text-primary\" fill=\"var(--primary)\" />\n      ) : (\n        <Bookmark className=\"opacity-85\" />\n      )}\n    </Button>\n  );\n};\n\nexport default BookmarkButton;\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/comment/comment-button.tsx",
      "content": "\"use client\";\n\nimport { MouseEvent } from \"react\";\nimport { MessageCircle } from \"lucide-react\";\nimport { AnyPost } from \"@lens-protocol/react\";\nimport { Button } from \"@/registry/new-york/ui/button\";\nimport { useLensPostContext } from \"@/registry/new-york/hooks/use-lens-post-context\";\n\ntype CommentButtonProps = {\n  onClick: (post: AnyPost) => void;\n};\n\nconst CommentButton = ({ onClick }: CommentButtonProps) => {\n  const { post, loading: postLoading, optimistic } = useLensPostContext();\n\n  const operations = post && \"operations\" in post ? post.operations : null;\n\n  const onButtonClick = (event: MouseEvent<HTMLButtonElement>) => {\n    event.currentTarget.blur();\n    event.stopPropagation();\n    if (!post) return;\n    onClick(post);\n  };\n\n  return (\n    <div className=\"flex items-center\">\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        onClick={onButtonClick}\n        disabled={postLoading}\n        className=\"w-8 h-8 active:outline-none focus-visible:outline-none cursor-pointer rounded-full\"\n      >\n        {operations?.hasCommented?.optimistic || operations?.hasCommented?.onChain ? (\n          <MessageCircle className=\"text-primary\" fill=\"var(--primary)\" />\n        ) : (\n          <MessageCircle className=\"opacity-85\" />\n        )}\n      </Button>\n      <span className=\"opacity-85\">{new Intl.NumberFormat().format(optimistic.commentCount)}</span>\n    </div>\n  );\n};\n\nexport default CommentButton;\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/collects/collect-button.tsx",
      "content": "\"use client\";\n\nimport { AnyPost } from \"@lens-protocol/react\";\nimport { ShoppingBag } from \"lucide-react\";\nimport { Button } from \"@/registry/new-york/ui/button\";\nimport { useLensPostContext } from \"@/registry/new-york/hooks/use-lens-post-context\";\nimport { MouseEvent } from \"react\";\n\ntype CollectButtonProps = {\n  onClick: (post: AnyPost) => void;\n};\n\nconst CollectButton = ({ onClick }: CollectButtonProps) => {\n  const { post, loading: postLoading, optimistic } = useLensPostContext();\n\n  const operations = post && \"operations\" in post ? post.operations : null;\n\n  const onButtonClick = (event: MouseEvent<HTMLButtonElement>) => {\n    event.currentTarget.blur();\n    event.stopPropagation();\n    if (!post) return;\n    onClick(post);\n  };\n\n  return (\n    <div className=\"flex items-center\">\n      <Button\n        onClick={onButtonClick}\n        disabled={postLoading}\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"w-8 h-8 active:outline-none focus-visible:outline-none cursor-pointer rounded-full\"\n      >\n        {optimistic.collected || operations?.hasSimpleCollected ? (\n          <svg viewBox=\"0 0 20 22\" className=\"w-4 h-4\">\n            <g strokeWidth=\"1.5\" fill=\"none\" fillRule=\"evenodd\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <path\n                d=\"M3,0 L0,4 L0,18 C0,19.1045695 0.8954305,20 2,20 L16,20 C17.1045695,20 18,19.1045695 18,18 L18,4 L15,0 L3,0 Z\"\n                stroke=\"var(--primary)\"\n                fill=\"var(--primary)\"\n                transform=\"translate(1 1)\"\n              />\n              <path\n                stroke=\"var(--primary)\"\n                fill=\"var(--background)\"\n                d=\"M3 0 0 4 18 4 15 0z\"\n                transform=\"translate(1 1)\"\n              />\n              <path stroke=\"var(--primary)\" d=\"M0 4 18 4\" transform=\"translate(1 1)\" />\n              <path\n                d=\"M13,8 C13,10.209139 11.209139,12 9,12 C6.790861,12 5,10.209139 5,8\"\n                stroke=\"var(--background)\"\n                transform=\"translate(1 1)\"\n              />\n            </g>\n          </svg>\n        ) : (\n          <ShoppingBag className=\"h-4 h-4\" />\n        )}\n      </Button>\n      <span className=\"opacity-85\">{new Intl.NumberFormat().format(optimistic.collectCount)}</span>\n    </div>\n  );\n};\n\nexport default CollectButton;\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/collects/collect-dialog.tsx",
      "content": "import { AnyPost, TxHash, useAuthenticatedUser } from \"@lens-protocol/react\";\nimport { forwardRef, useEffect, useImperativeHandle, useState } from \"react\";\nimport { BoxIcon, CircleDollarSign, Clock, Snowflake, Users } from \"lucide-react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/registry/new-york/ui/dialog\";\nimport moment from \"moment/moment\";\nimport { Button } from \"@/registry/new-york/ui/button\";\nimport { Referral } from \"@/registry/new-york/lib/lens-post-provider\";\nimport { useLensPostContext } from \"@/registry/new-york/hooks/use-lens-post-context\";\nimport { getUsernamePath, truncateAddress } from \"@/registry/new-york/lib/lens-utils\";\n\nexport type CollectDialogRef = {\n  open: () => void;\n  close: () => void;\n  isOpen: boolean;\n};\n\ntype CollectDialogProps = {\n  post: AnyPost;\n  referrals?: Referral[];\n  onSuccess?: (txHash: TxHash) => void;\n  onError?: (error: Error) => void;\n};\n\nconst CollectDialog = forwardRef<CollectDialogRef, CollectDialogProps>(\n  ({ post, referrals, onSuccess, onError }, ref) => {\n    const { collect } = useLensPostContext();\n\n    const [collectDialogOpen, setCollectDialogOpen] = useState(false);\n    const [collecting, setCollecting] = useState(false);\n    const [collectEnded, setCollectEnded] = useState(false);\n    const [collectAvailable, setCollectAvailable] = useState(false);\n\n    const { data: user } = useAuthenticatedUser();\n\n    const action = \"actions\" in post && post.actions?.find(action => action.__typename === \"SimpleCollectAction\");\n    const operations = post && \"operations\" in post ? post.operations : null;\n    const stats = post && \"stats\" in post ? post.stats : null;\n\n    useImperativeHandle(ref, () => ({\n      open: () => setCollectDialogOpen(true),\n      close: () => setCollectDialogOpen(false),\n      isOpen: collectDialogOpen,\n    }));\n\n    useEffect(() => {\n      if (!action) {\n        setCollectAvailable(false);\n        onError?.(new Error(\"This post is not collectable\"));\n        return;\n      }\n\n      if (action.endsAt) {\n        setCollectEnded(moment().isAfter(action.endsAt));\n      }\n\n      if (!operations?.canSimpleCollect || operations?.hasSimpleCollected) {\n        setCollectAvailable(false);\n        return;\n      }\n\n      if (action.collectLimit) {\n        setCollectAvailable((stats?.collects ?? 0) < action.collectLimit);\n      }\n    }, [action]);\n\n    const onCollectClick = async () => {\n      setCollecting(true);\n      try {\n        const txHash = await collect();\n        if (txHash) {\n          setCollectDialogOpen(false);\n        }\n      } catch (e: any) {\n        if (e instanceof Error) {\n          onError?.(e);\n        }\n      } finally {\n        setCollecting(false);\n      }\n    };\n\n    if (!action) {\n      return null;\n    }\n\n    return (\n      <Dialog open={collectDialogOpen} onOpenChange={setCollectDialogOpen}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Collect</DialogTitle>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-2\">\n            <div className=\"text-lg font-bold py-3\">\n              {\"collectibleMetadata\" in post && post.collectibleMetadata.name ? (\n                post.collectibleMetadata.name\n              ) : (\n                <span>\n                  Post by{\" \"}\n                  {post.author.username ? (\n                    <a\n                      href={getUsernamePath(post.author.username.value)}\n                      className=\"!font-bold\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      @{post.author.username.localName}\n                    </a>\n                  ) : (\n                    <span className=\"!font-bold\">{truncateAddress(post.author.address)}</span>\n                  )}\n                </span>\n              )}\n            </div>\n            {action.payToCollect && (\n              <div className=\"flex gap-2.5 items-center\">\n                <CircleDollarSign className=\"w-7 h-7\" />\n                <span className=\"font-bold\">\n                  <span className=\"text-xl\">{action.payToCollect.amount.value}</span>{\" \"}\n                  {action.payToCollect.amount.asset.symbol}\n                </span>\n              </div>\n            )}\n            <div className=\"flex gap-4 items-center pl-1.5\">\n              <BoxIcon className=\"w-4 h-4 opacity-60\" />\n              <span>\n                <a\n                  href={`https://lenscan.io/nfts/${action.collectNftAddress}`}\n                  className=\"font-semibold\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {truncateAddress(action.collectNftAddress, 10)}\n                </a>\n              </span>\n            </div>\n            <div className=\"flex gap-4 items-center pl-1.5\">\n              <Users className=\"w-4 h-4 opacity-60\" />\n              <span>\n                <span className=\"font-semibold\">{new Intl.NumberFormat().format(stats?.collects ?? 0)}</span>{\" \"}\n                {stats?.collects === 1 ? \"collector\" : \"collectors\"}\n              </span>\n            </div>\n            {action.collectLimit && (\n              <div className=\"flex gap-4 items-center pl-1.5\">\n                <Snowflake className=\"w-4 h-4 opacity-60\" />\n                <span>\n                  <span className=\"font-semibold\">\n                    {new Intl.NumberFormat().format(action.collectLimit - (stats?.collects ?? 0))} of{\" \"}\n                    {action.collectLimit}\n                  </span>{\" \"}\n                  remaining\n                </span>\n              </div>\n            )}\n            {action.endsAt && (\n              <div className=\"flex gap-4 items-center pl-1.5\">\n                <Clock className=\"w-4 h-4 opacity-60\" />\n                <abbr className=\"!border-b-0 no-underline\" title={moment(action.endsAt).format(\"LLL\")}>\n                  {collectEnded ? \"Ended \" : \"Ends \"}{\" \"}\n                  <span className=\"font-semibold\">{moment(action.endsAt).fromNow()}</span>\n                </abbr>\n              </div>\n            )}\n            <div className=\"flex justify-end pt-2\">\n              <Button\n                size=\"lg\"\n                className=\"font-bold\"\n                onClick={onCollectClick}\n                disabled={collecting || collectEnded || !collectAvailable}\n              >\n                {collecting ? (\n                  <span className=\"loader\"></span>\n                ) : !user?.address ? (\n                  \"Log in to collect\"\n                ) : operations?.hasSimpleCollected ? (\n                  \"Collected\"\n                ) : collectEnded ? (\n                  \"No longer available\"\n                ) : collectAvailable ? (\n                  action.payToCollect ? (\n                    `Collect for ${action.payToCollect.amount.value} ${action.payToCollect.amount.asset.symbol}`\n                  ) : (\n                    \"Collect for free\"\n                  )\n                ) : (\n                  \"Unable to collect\"\n                )}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    );\n  },\n);\n\nexport default CollectDialog;\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/tips/tip-button.tsx",
      "content": "\"use client\";\n\nimport { AnyPost } from \"@lens-protocol/react\";\nimport { MouseEvent } from \"react\";\nimport { CircleDollarSign } from \"lucide-react\";\nimport { Button } from \"@/registry/new-york/ui/button\";\nimport { useLensPostContext } from \"@/registry/new-york/hooks/use-lens-post-context\";\n\ninterface Props {\n  onClick: (post: AnyPost) => void;\n}\n\nconst TipButton = ({ onClick }: Props) => {\n  const { post, loading: postLoading, optimistic } = useLensPostContext();\n\n  const operations = post && \"operations\" in post ? post.operations : null;\n\n  const handleClick = (event: MouseEvent<HTMLButtonElement>) => {\n    event.currentTarget.blur();\n    event.stopPropagation();\n    if (!post) return;\n    onClick(post);\n  };\n\n  if (!post) return null;\n\n  return (\n    <div className=\"flex items-center\">\n      <Button\n        variant=\"ghost\"\n        disabled={postLoading || !operations?.canTip}\n        onClick={handleClick}\n        className=\"w-8 h-8 active:outline-none focus-visible:outline-none cursor-pointer rounded-full\"\n      >\n        {optimistic.tipped ? (\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            fill=\"var(--primary)\"\n            stroke=\"var(--background)\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            className=\"w-4 h-4\"\n          >\n            <circle cx=\"12\" cy=\"12\" r=\"12\" />\n            <path d=\"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8\" strokeWidth=\"2\" />\n            <path d=\"M12 18V6\" strokeWidth=\"2\" />\n          </svg>\n        ) : (\n          <CircleDollarSign className=\"w-4 h-4\" />\n        )}\n      </Button>\n      <span className=\"opacity-85\">{new Intl.NumberFormat().format(optimistic.tipCount)}</span>\n    </div>\n  );\n};\n\nexport default TipButton;\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/tips/lens-tip-dialog.tsx",
      "content": "import {\n  Erc20Amount,\n  evmAddress,\n  NativeAmount,\n  PaymentSource,\n  SessionClient,\n  TxHash,\n  useAuthenticatedUser,\n  useSessionClient,\n} from \"@lens-protocol/react\";\nimport { forwardRef, useCallback, useEffect, useImperativeHandle, useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/registry/new-york/ui/dialog\";\nimport { fetchBalancesBulk } from \"@lens-protocol/client/actions\";\nimport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/registry/new-york/ui/select\";\nimport { useAccount } from \"wagmi\";\nimport { Input } from \"@/registry/new-york/ui/input\";\nimport { Button } from \"@/registry/new-york/ui/button\";\nimport { Spinner } from \"@/registry/new-york/ui/spinner\";\nimport { NativeToken } from \"@/registry/new-york/lib/lens-utils\";\nimport { Skeleton } from \"@/registry/new-york/ui/skeleton\";\n\nexport interface TipDialogRef {\n  open: () => void;\n  close: () => void;\n  isOpen: boolean;\n}\n\nexport interface TipDialogProps {\n  /**\n   *  Function to create a tip transaction. Any error thrown will be caught and passed to onError callback.\n   */\n  createTip: (source: PaymentSource, amount: string, tokenAddress: string) => Promise<TxHash | undefined>;\n\n  /**\n   * Optional list of supported token addresses to tip with. If not provided, only the native token will be supported.\n   */\n  supportedTokens?: string[];\n\n  /**\n   * Callback fired when a tip is successfully created.\n   */\n  onTipCreated?: (txHash: TxHash) => void;\n\n  /**\n   * Callback fired when an error occurs during tip creation.\n   */\n  onError?: (error: Error) => void;\n}\n\nconst LensTipDialog = forwardRef<TipDialogRef, TipDialogProps>(\n  ({ supportedTokens, createTip, onTipCreated, onError }, ref) => {\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [balances, setBalances] = useState<(Erc20Amount | NativeAmount)[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState<Error | null>(null);\n    const [selectedTokenAddress, setSelectedTokenAddress] = useState<string>(NativeToken);\n    const [inputValue, setInputValue] = useState<string>(\"\");\n    const [balance, setBalance] = useState<string>(\"0\");\n    const [paymentSource, setPaymentSource] = useState<PaymentSource>(PaymentSource.Signer);\n\n    const { data: session } = useSessionClient();\n    const { data: user } = useAuthenticatedUser();\n    const { address } = useAccount();\n\n    const account = user?.address;\n\n    useImperativeHandle(ref, () => ({\n      open: () => setDialogOpen(true),\n      close: () => setDialogOpen(false),\n      isOpen: dialogOpen,\n    }));\n\n    const getAddressFromBalance = (balance: Erc20Amount | NativeAmount) => {\n      return balance.__typename === \"NativeAmount\" ? NativeToken : balance.asset.contract.address;\n    };\n\n    const fetchBalances = useCallback(\n      async (session: SessionClient, address: string) => {\n        try {\n          const res = await fetchBalancesBulk(session, {\n            address: paymentSource === PaymentSource.Account ? account : evmAddress(address),\n            tokens: supportedTokens,\n            includeNative: true,\n          });\n\n          if (res.isErr()) {\n            throw res.error;\n          }\n\n          const accountBalances = res.value.filter(\n            balance => balance.__typename === \"NativeAmount\" || balance.__typename === \"Erc20Amount\",\n          );\n          setBalances(accountBalances);\n        } finally {\n          setIsLoading(false);\n        }\n      },\n      [paymentSource, selectedTokenAddress],\n    );\n\n    useEffect(() => {\n      if (!dialogOpen || !session?.isSessionClient() || !address || !account) return;\n      setIsLoading(true);\n\n      fetchBalances(session, address).catch(err => {\n        setError(err);\n      });\n    }, [session, dialogOpen, address, account]);\n\n    useEffect(() => {\n      if (!balances.length) {\n        setSelectedTokenAddress(NativeToken);\n        return;\n      }\n\n      if (!selectedTokenAddress) {\n        if (balances[0].__typename === \"NativeAmount\") {\n          setSelectedTokenAddress(NativeToken);\n        } else {\n          setSelectedTokenAddress(balances[0]?.asset.contract.address);\n        }\n      }\n    }, [balances]);\n\n    useEffect(() => {\n      if (!balances.length || !selectedTokenAddress) {\n        setBalance(\"0\");\n        return;\n      }\n      const balance =\n        selectedTokenAddress === NativeToken\n          ? balances.find(b => b.__typename === \"NativeAmount\")\n          : balances.find(b => b.asset.contract.address === selectedTokenAddress);\n      setBalance(balance?.value || \"0\");\n    }, [balances, selectedTokenAddress]);\n\n    const onSubmitClick = async () => {\n      if (!selectedTokenAddress || !inputValue) {\n        onError?.(new Error(\"Token and amount cannot be falsy\"));\n        return;\n      }\n\n      setIsSubmitting(true);\n\n      try {\n        const txHash = await createTip(paymentSource, inputValue, selectedTokenAddress);\n        if (txHash) {\n          setDialogOpen(false);\n          setInputValue(\"\");\n          onTipCreated?.(txHash);\n        } else {\n          onError?.(new Error(\"Unexpected error\"));\n        }\n      } catch (e) {\n        if (e instanceof Error) {\n          onError?.(e);\n        }\n      } finally {\n        setIsSubmitting(false);\n      }\n    };\n\n    const onPaymentSourceChange = (value: PaymentSource) => {\n      setPaymentSource(value);\n      setSelectedTokenAddress(NativeToken);\n      setInputValue(\"\");\n    };\n\n    return (\n      <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\n        <DialogContent className=\"sm:max-w-sm\">\n          <DialogHeader className=\"text-left border-b pb-4\">\n            <DialogTitle>Send a tip</DialogTitle>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-4 min-w-0\">\n            {(error || (!isLoading && balances.length === 0)) && (\n              <div className=\"py-4 flex gap-4 items-center\">\n                <span className=\"text-red-500\">No tokens available</span>\n              </div>\n            )}\n\n            {isLoading && balances.length === 0 && (\n              <div className=\"flex flex-col gap-4 min-w-0\">\n                <div className=\"flex gap-4 items-center\">\n                  <Skeleton className=\"h-8 flex-grow\" />\n                  <Skeleton className=\"h-8 w-1/3\" />\n                </div>\n                <div className=\"flex gap-4\">\n                  <Skeleton className=\"h-8 flex-grow\" />\n                  <Skeleton className=\"h-8 w-1/6\" />\n                </div>\n                <div className=\"flex gap-8 justify-between\">\n                  <Skeleton className=\"h-4 w-1/3 mt-1\" />\n                  <Skeleton className=\"h-8 w-1/3\" />\n                </div>\n              </div>\n            )}\n\n            {balances.length > 0 && (\n              <div className=\"flex flex-col gap-4 min-w-0\">\n                <div className=\"flex gap-4 items-center\">\n                  <Select value={selectedTokenAddress} onValueChange={setSelectedTokenAddress}>\n                    <SelectTrigger className=\"flex-grow\">\n                      <SelectValue placeholder=\"Select a token\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectGroup>\n                        {balances.map(balance => (\n                          <SelectItem\n                            key={getAddressFromBalance(balance)}\n                            value={getAddressFromBalance(balance)}\n                            disabled={balance.value === \"0\"}\n                          >\n                            {balance.asset.name} ({balance.asset.symbol})\n                          </SelectItem>\n                        ))}\n                      </SelectGroup>\n                    </SelectContent>\n                  </Select>\n                  <Select value={paymentSource} onValueChange={onPaymentSourceChange}>\n                    <SelectTrigger className=\"flex-none\">\n                      <SelectValue placeholder=\"Source\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectGroup>\n                        <SelectItem key={PaymentSource.Signer} value={PaymentSource.Signer}>\n                          from Wallet\n                        </SelectItem>\n                        <SelectItem key={PaymentSource.Account} value={PaymentSource.Account}>\n                          from Account\n                        </SelectItem>\n                      </SelectGroup>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex gap-4\">\n                  <Input\n                    type=\"number\"\n                    placeholder=\"Amount\"\n                    value={inputValue}\n                    onChange={e => setInputValue(e.target.value)}\n                    className=\"flex-grow\"\n                    disabled={isLoading}\n                  />\n                  <Button\n                    variant=\"secondary\"\n                    className=\"flex-none\"\n                    onClick={() => setInputValue(balance)}\n                    disabled={isLoading || isSubmitting}\n                  >\n                    Max\n                  </Button>\n                </div>\n\n                <div className=\"flex gap-8 justify-between\">\n                  <span className=\"flex items-center gap-2 truncate text-muted-foreground text-sm h-fit\">\n                    <span className=\"text-muted-foreground\">Balance:</span>\n                    {isLoading ? (\n                      <Spinner />\n                    ) : (\n                      <span className=\"font-bold\">\n                        {parseFloat(balance).toLocaleString(undefined, {\n                          maximumFractionDigits: 6,\n                          useGrouping: false,\n                        })}\n                        {balance.split(\".\")[1]?.length > 6 ? \"â€¦\" : \"\"}\n                      </span>\n                    )}\n                  </span>\n                  <Button\n                    className=\"flex-none flex items-center gap-2\"\n                    onClick={onSubmitClick}\n                    disabled={isLoading || isSubmitting}\n                  >\n                    {isSubmitting ? (\n                      <>\n                        <Spinner /> Sending...\n                      </>\n                    ) : (\n                      \"Send tip\"\n                    )}\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n    );\n  },\n);\n\nexport default LensTipDialog;\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/lens-image.tsx",
      "content": "import { ComponentProps } from \"react\";\nimport { MediaImage } from \"@lens-protocol/react\";\nimport { parseUri } from \"@/registry/new-york/lib/lens-utils\";\nimport { cn } from \"@/lib/utils\";\n\ntype ButtonProps = Omit<ComponentProps<\"img\">, \"src\">;\n\ntype Props = {\n  image: MediaImage;\n};\n\nexport default function LensImage({ image, ...props }: Props & ButtonProps) {\n  const imageUri = image ? parseUri(image.item) : null;\n\n  if (!imageUri) {\n    return null;\n  }\n\n  return (\n    <img\n      src={imageUri}\n      {...props}\n      className={cn(\"w-full mt-2 border rounded-xl object-contain cursor-pointer\", props.className)}\n    />\n  );\n}\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/components/feed/link-preview.tsx",
      "content": "import { useEffect, useState } from \"react\";\nimport getMetaFromUrl, { UrlMetadata } from \"@/registry/new-york/lib/get-meta-from-url\";\nimport getFavicon from \"@/registry/new-york/lib/get-favicon\";\n\ntype Props = {\n  url: string;\n};\n\nexport default function LinkPreview(props: Props) {\n  const { url } = props;\n\n  const [urlMetadata, setUrlMetadata] = useState<UrlMetadata | null>(null);\n\n  const favicon = getFavicon(url);\n\n  useEffect(() => {\n    if (!url) return;\n    getMetaFromUrl({ url }).then(setUrlMetadata);\n  }, [url]);\n\n  if (!urlMetadata) {\n    return null;\n  }\n\n  return (\n    <div onClick={event => event.stopPropagation()}>\n      <a\n        href={url}\n        className=\"w-full max-w-sm flex flex-col bg-card text-card-foreground border rounded-lg mb-4 cursor-pointer hover:!no-underline\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <div className=\"flex flex-col p-2 flex-1 min-w-0 gap-0.5\">\n          <div className=\"flex gap-1 items-center\">\n            <img\n              src={urlMetadata.icon ?? favicon}\n              width={24}\n              height={24}\n              alt={`${url} favicon`}\n              className=\"w-4 h-4 p-0.5\"\n            />\n            <div className=\"line-clamp-1 opacity-60 text-xs font-normal\">\n              {urlMetadata.siteName ? urlMetadata.siteName + \" â€¢ \" : \"\"}\n              {urlMetadata.url}\n            </div>\n          </div>\n          {urlMetadata.title && <div className=\"line-clamp-1 !font-bold text-sm\">{urlMetadata.title}</div>}\n          {urlMetadata.description && (\n            <div className=\"line-clamp-2 text-xs !font-normal\">{urlMetadata.description}</div>\n          )}\n        </div>\n      </a>\n    </div>\n  );\n}\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/lib/regex.ts",
      "content": "const regexLookbehindAvailable: boolean = ((): boolean => {\n  try {\n    return \"ab\".replace(/(?<=a)b/g, \"c\") === \"ac\";\n  } catch {\n    return false;\n  }\n})();\n\nconst MATCH_BEHIND = regexLookbehindAvailable ? \"(?<=^|\\\\s)\" : \"\";\n\nconst MENTION_NAMESPACE = \"\\\\w+\\\\/\";\nconst MENTION_BODY = \"([\\\\dA-Za-z]\\\\w{2,25})\";\n\nexport const RegEx = {\n  CASHTAG: /(\\$\\w*[A-Za-z]\\w*)/g,\n  HASHTAG: /(#\\w*[A-Za-z]\\w*)/g,\n  MENTION: new RegExp(`${MATCH_BEHIND}@${MENTION_NAMESPACE}${MENTION_BODY}`, \"g\"),\n  URL: /\\b(http|https):\\/\\/([\\p{L}\\p{N}_-]+(?:(?:\\.[\\p{L}\\p{N}_-]+)+))([\\p{L}\\p{N}_.,@?^=%&:\\/~+#-]*[\\p{L}\\p{N}_@?^=%&\\/~+#-])/gu,\n};\n",
      "type": "registry:lib"
    }
  ]
}
